<sectiond ng-controller="ledgerCtrl" id="ledger">

  <tc-side></tc-side>

  <section id="transactions_section">

    <div class="toolbar">
      <!-- connect to cash/stripe in the side bar to show the different ledger views and balances -->
      <!-- <span class="account-type">Cash</span>
      <span>Balance</span> -->
      <form class="search">
        <input type="text" class="search" ng-model="searchTrans">
      </form>
    </div>

    <div class="add-modal">
      <input type="text" class="" ng-model="transaction.account">
      <input type="text" class="" ng-model="transaction.product">
      <div id="btn4" ng-click="logoutUser();"><a ui-sref="home">logout</a></div>
      <!-- <div id="btn3" ng-click="putAccount(transaction.account);"><a ui-sref="home">account</a></div> -->
      <!-- ng-click to post to API and append to frontend -->
      <!-- add(transaction); -->
      <div id="btn2" ng-click="postTransactions(); getTransactions();"><a ui-sref="home">submit</a></div>

    </div>

    <table class="">
      <tbody>
        <tr id="t-headers">
          <th></th>
          <th class="md-title">
            <a ui-sref="home" ng-click="sortType = 'account'; sortReverse = !sortReverse">
              ACCOUNT
              <span ng-show="sortType == 'account'" class="fa fa-caret-down"></span>
              <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
            </a>
          </th>
          <th class="md-title">
            <a ui-sref="home" ng-click="sortType = 'date'; sortReverse = !sortReverse">
              DATE
              <span ng-show="sortType == 'date'" class="fa fa-caret-down"></span>
              <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
            </a>
          </th>
          <th class="md-title">
            <a ui-sref="home" ng-click="sortType = 'customer'; sortReverse = !sortReverse">
              CUSTOMER
              <span ng-show="sortType == 'customer'" class="fa fa-caret-down"></span>
              <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
            </a>
          </th>
          <th class="md-title">
            <a ui-sref="home" ng-click="sortType = 'product'; sortReverse = !sortReverse">
              PRODUCT
              <span ng-show="sortType == 'product'" class="fa fa-caret-down"></span>
              <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
            </a>
          </th>
          <th class="md-title">
            <a ui-sref="home" ng-click="sortType = 'outflow'; sortReverse = !sortReverse">
              OUTFLOW
              <span ng-show="sortType == 'outflow'" class="fa fa-caret-down"></span>
              <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
            </a>
          </th>
          <th class="md-title">
            <a ui-sref="home" ng-click="sortType = 'inflow'; sortReverse = !sortReverse">
              INFLOW
              <span ng-show="sortType == 'inflow'" class="fa fa-caret-down"></span>
              <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
            </a>
          </th>
        </tr>
        <tr class="input-transactions">
          <td></td>
          <td>

            <select class="select" ng-model="transaction.account" ng-options="account._id as account.account for account in accounts">
            </select>
          </td>

          <td>
            <input type="text" ng-model="transaction.date">
          </td>
          <td>
            <input type="text" ng-model="transaction.customer">
          </td>
          <td>
            <select class="select" ng-model="transaction.product" ng-options="product._id as product.product for product in products">
            </select>
          </td>
          <td>
            <input type="text" ng-model="transaction.outflow">
          </td>
          <td>
            <input type="text" ng-model="transaction.inflow">
          </td>

        </tr>

        <tr ng-repeat="transaction in trans | orderBy:sortType:sortReverse | filter:searchTrans">
          <td></td>
          <td class="trans-repeat">{{transaction.account.name}}</td>
          <td class="trans-repeat">{{transaction.date| date:"MM/dd/yy"}}</td>
          <td class="trans-repeat">{{transaction.customer}}</td>
          <td class="trans-repeat">{{transaction.product.name}}</td>
          <td class="trans-repeat">${{transaction.outflow}}</td>
          <td class="trans-repeat">${{transaction.inflow}}</td>
        </tr>

        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td>Total:</td>
          <td>{{trans | sumOfValue:'outflow' | currency}}</td>
          <td>{{trans | sumOfValue:'inflow' | currency}}</td>
        </tr>

      </tbody>

    </table>
    <!-- <div class="card-holder">
        <div class="card-wrap">
            <div class="front">
                <form action="">
                    <div class="input-wrap input-wrap--short">
                        <input type="text" placeholder="Product Name" id="name" />

                    </div>
                    <div class="input-wrap">
                        <input type="text" id="card-num" placeholder="Product Description" />
                    </div>


                     <div class="input-wrap input-wrap--double">
                        $<input type="text" placeholder="price" id="expiry-mo" />
                    </div>
                    <input type="submit" />
                </form>
            </div>
            <div class="back">
                <form action="">
                    <input type="submit" value="Add to Product Shelf" ng-click="putAccount();"/>
            </div>
        </div>
        <div class="success">
            <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512"><path d="M461.6 109.6l-54.9-43.3c-1.7-1.4-3.8-2.4-6.2-2.4-2.4 0-4.6 1-6.3 2.5L194.5 323s-78.5-75.5-80.7-77.7c-2.2-2.2-5.1-5.9-9.5-5.9s-6.4 3.1-8.7 5.4c-1.7 1.8-29.7 31.2-43.5 45.8-.8.9-1.3 1.4-2 2.1-1.2 1.7-2 3.6-2 5.7 0 2.2.8 4 2 5.7l2.8 2.6s139.3 133.8 141.6 136.1c2.3 2.3 5.1 5.2 9.2 5.2 4 0 7.3-4.3 9.2-6.2l249.1-320c1.2-1.7 2-3.6 2-5.8 0-2.5-1-4.6-2.4-6.4z"/></svg>
        </div>
    </div>
  </div> -->

    <div  class="">
      <div ng-repeat="name in accounts">
        {{name.name}}
      </div>
      <div class="">
        Account
        <input type="text" ng-model="createAccount">
        <button ng-click="postAccount(createAccount); updateProfileAct();">submit account</button>
      </div>
      <div ng-repeat="name in products">
        {{name.name}}
      </div>
      <div class="">
        Product
        <input type="text" ng-model="name">
        <input type="text" ng-model="description">
        <input type="text" ng-model="price">
        <button ng-click="postProduct(name, description, price); updateProfilePro();">submit product</button>
      </div>

    </div>
  </section>

  <section id="footer">

  </section>

  </section>
