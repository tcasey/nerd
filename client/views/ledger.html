<sectiond ng-controller="ledgerCtrl" id="ledger">

  <tc-side></tc-side>

  <section id="transactions_section">

    <!-- <div class="toolbar">
      <div class="search">
      <svg version="1.1" viewBox="0 0 142.358 24.582">
        <path id="search-path" fill="none" d="M131.597,14.529c-1.487,1.487-3.542,2.407-5.811,2.407c-4.539,0-8.218-3.679-8.218-8.218s3.679-8.218,8.218-8.218c4.539,0,8.218,3.679,8.218,8.218C134.004,10.987,133.084,13.042,131.597,14.529c0,0,9.554,9.554,9.554,9.554H0"
        />
      </svg>
      <label for="search" class="search-label"></label>
      <input ng-model="searchTrans" type="search" id="search" autocomplete="off" class="input-search">


    </div>
    </div> -->
    <!-- <form class="search">
      <input type="text" class="search" ng-model="searchTrans">
    </form> -->
    <div class="add-modal">
      <!-- <input type="text" class="" ng-model="transaction.account"> -->
      <!-- <input type="text" class="" ng-model="transaction.product"> -->
      <div class=""><a ui-sref="home">+</a></div>
      <div id="btn4" ng-click="logoutUser();"><a ui-sref="home">logout</a></div>
      <!-- <div id="btn3" ng-click="putAccount(transaction.account);"><a ui-sref="home">account</a></div> -->
      <!-- ng-click to post to API and append to frontend -->
      <!-- add(transaction); -->
      <div id="btn2" ng-click="postTransactions(); getTransactions();"><a ui-sref="home">submit</a></div>

    </div>

    <table class="">
      <tbody>
        <tr id="t-headers">
          <th></th>
          <th class="md-title">
            <a ui-sref="home" ng-click="sortType = 'account'; sortReverse = !sortReverse">
              ACCOUNT
              <span ng-show="sortType == 'account'" class="fa fa-caret-down"></span>
              <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
            </a>
          </th>
          <th class="md-title">
            <a ui-sref="home" ng-click="sortType = 'date'; sortReverse = !sortReverse">
              DATE
              <span ng-show="sortType == 'date'" class="fa fa-caret-down"></span>
              <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
            </a>
          </th>
          <th class="md-title">
            <a ui-sref="home" ng-click="sortType = 'customer'; sortReverse = !sortReverse">
              CUSTOMER
              <span ng-show="sortType == 'customer'" class="fa fa-caret-down"></span>
              <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
            </a>
          </th>
          <th class="md-title">
            <a ui-sref="home" ng-click="sortType = 'product'; sortReverse = !sortReverse">
              PRODUCT
              <span ng-show="sortType == 'product'" class="fa fa-caret-down"></span>
              <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
            </a>
          </th>
          <th class="md-title">
            <a ui-sref="home" ng-click="sortType = 'outflow'; sortReverse = !sortReverse">
              OUTFLOW
              <span ng-show="sortType == 'outflow'" class="fa fa-caret-down"></span>
              <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
            </a>
          </th>
          <th class="md-title">
            <a ui-sref="home" ng-click="sortType = 'inflow'; sortReverse = !sortReverse">
              INFLOW
              <span ng-show="sortType == 'inflow'" class="fa fa-caret-down"></span>
              <span ng-show="sortType == 'name' && sortReverse" class="fa fa-caret-up"></span>
            </a>
          </th>
        </tr>
        <tr class="input-transactions">
          <td></td>
          <td>

            <select class="select" ng-model="transaction.account" ng-options="account._id as account.name for account in accounts">
            </select>
          </td>

          <td>
            <input type="text" ng-model="transaction.date">
          </td>
          <td>
            <input type="text" ng-model="transaction.customer">
          </td>
          <td>
            <select class="select" ng-model="transaction.product" ng-options="product._id as product.name for product in products">
            </select>
          </td>
          <td>
            <input type="text" ng-model="transaction.outflow">
          </td>
          <td>
            <input type="text" ng-model="transaction.inflow">
          </td>

        </tr>

        <tr ng-repeat="transaction in trans | orderBy:sortType:sortReverse | filter:searchTrans">
          <td><a ui-sref="home" ng-click="deleteTransaction(transaction._id);getTransactions();">x</a></td>
          <td class="trans-repeat">{{transaction.account.name}}</td>
          <td class="trans-repeat">{{transaction.date| date:"MM/dd/yy"}}</td>
          <td class="trans-repeat">{{transaction.customer}}</td>
          <td class="trans-repeat">{{transaction.product.name}}</td>
          <td class="trans-repeat">${{transaction.outflow}}</td>
          <td class="trans-repeat">${{transaction.inflow}}</td>
        </tr>

        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td>Total:</td>
          <td>{{trans | sumOfValue:'outflow' | currency}}</td>
          <td>{{trans | sumOfValue:'inflow' | currency}}</td>
        </tr>

      </tbody>

    </table>

    <div class="">
      <div ng-repeat="name in accounts">
        {{name.name}}
      </div>
      <div class="">
        Account
        <input type="text" ng-model="createAccount">
        <button ng-click="postAccount(createAccount);">submit account</button>
        <!-- updateProfileAct(); -->
      </div>


    </div>
  </section>

  <section id="footer">

  </section>

  </section>
